<div class="carrinho-container">
  <!-- Coluna de produtos -->
  <div class="produtos-container">

    <!-- Checkbox geral -->
    <div class="selecionar-todos">
      <input type="checkbox" [(ngModel)]="selecionarTodos" (change)="toggleTodos()">
      <label>Todos os produtos</label>
    </div>

    <!-- Agrupamento por vendedor -->
    <div class="grupo-vendedor" *ngFor="let vendedor of vendedores">
      <div class="vendedor-header">
        <input type="checkbox" [(ngModel)]="vendedor.selecionado" (change)="toggleVendedor(vendedor)">
        <span class="nome-vendedor">{{ vendedor.nomeFuncionario }}</span>
      </div>

      <!-- Lista de produtos do vendedor -->
       <div class="produto-item" *ngFor="let produto of  vendedor.produtos">
       <input type="checkbox" [(ngModel)]="carregando" (change)="verificarSelecao()">
         <img [src]="getImageUrl(produto.fotoProduto)" *ngIf="produto.fotoProduto">

         <div class="produto-info">
         <span class="produto-nome">{{ produto.nomeProduto }}</span>
          <a class="excluir" (click)="removerProduto(produto)">Excluir</a>
        </div>

        <div class="quantidade">
          <button (click)="alterarQuantidade(produto, -1)">-</button>
          <span>{{ produto.qtdVd || 1 }}</span>
          <button (click)="alterarQuantidade(produto, 1)">+</button>
        </div>

        <div class="preco">
          <span *ngIf="produto.percentual" class="preco-antigo">R$ {{ produto.valorVenda | number:'1.2-2' }}</span>
          <span class="preco-atual">R$ {{ (produto.valorVenda * (produto.qtdVd || 1)) | number:'1.2-2' }}</span>
        </div>
      </div>
    </div>
  </div>

  <!-- Coluna resumo -->
  <div class="resumo-container">
    <div class="resumo-card">
      <h3>Resumo da compra</h3>
      <div class="resumo-total">
        <span>Total</span>
        <strong>R$ {{ total | number:'1.2-2' }}</strong>
      </div>
      <button class="btn-continuar" (click)="continuarCompra()">Continuar a compra</button>
    </div>
  </div>
</div>

